/**
 * @file AEX
 * @version 2.0
 *
 * @author Lvovich
 * @see {@link https://github.com/Lvovich/aex|GitHub}
 *
 * @license MIT
 */
'use strict';try{(function(){function a(){}window.AEX=function(b){if("object"!==typeof this||!this.m())return console.error('AEX: incorrect call without "new" or browser not supported. Plugin Off!'),{kick:a};this.a=this.o(b)}})(),window.AEX.prototype.j=function(a){function b(a){return typeof a in g.a.g?a:JSON.stringify(a)}var c={},g=this;if(window.FormData)if(c.f="",c.c=new window.FormData,typeof a in this.a.g)c.c.append(this.a.defaultParamName,a);else for(var d in a)a.hasOwnProperty(d)&&c.c.append(d,
b(a[d]));else{var e="aex"+(""+Math.random()).slice(2,18),h="\r\n--"+e+"\r\n",k="\r\n--"+e+"--",f=[""];c.f=e;if(typeof a in this.a.g)f.push('Content-Disposition: form-data; name="'+this.a.defaultParamName+'"\r\n\r\n'+a);else for(d in a)a.hasOwnProperty(d)&&f.push('Content-Disposition: form-data; name="'+d+'"\r\n\r\n'+b(a[d]));c.c=f.join(h)+k}return c},window.AEX.prototype.kick=function(a,b){if(!this.s(a,b))return console.warn("AEX.kick: Invalid user data or response handler. Aborted."),null;a=this.j(a);
a.f&&this.b.setRequestHeader("Content-Type","multipart/form-data; boundary="+a.f);this.b.h=b;this.b.open("POST",this.a.target,!0);this.b.timeout=this.a.waitingtime;this.b.send(a.c);return this.b},window.AEX.prototype.l=function(){4===this.readyState&&this.h&&this.h()},window.AEX.prototype.m=function(){if(!XMLHttpRequest)return!1;this.b=new XMLHttpRequest;this.b.onreadystatechange=this.l;this.b.ontimeout=function(){console.warn("AEX.kick: No server response for a long times. Exchange aborted. Retry later.")};
return!0},window.AEX.prototype.o=function(a){if(a.waitingtime){var b=parseInt(+a.waitingtime,10);a.waitingtime=isNaN(b)?3E4:1E3*b}else a.waitingtime=3E4;a.target=a.target?""+a.target:"/";a.defaultParamName=a.defaultParamName?""+a.defaultParamName:"ajax";a.i={object:0,string:0,number:0,"boolean":0};a.g={string:0,number:0,"boolean":0};return a},window.AEX.prototype.s=function(a,b){return typeof a in this.a.i&&(b?"function"===typeof b:!0)}}catch(a){console.dir(a)};
