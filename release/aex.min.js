/**
 * @file AEX
 * @version 3.0
 *
 * @author Lvovich
 * @see {@link https://github.com/Lvovich/aex|GitHub}
 *
 * @license MIT
 */
'use strict';(function(){try{var e=function(){};window.AEX=function(a){if("object"!==typeof this||!this.m())return console.error('AEX: incorrect call without "new" or browser not supported. Plugin Off!'),{kick:e};this.a=this.o(a)};window.AEX.prototype.j=function(a){function b(a){return typeof a in e.a.g?a:JSON.stringify(a)}var c={},e=this;if(window.FormData)if(c.f="",c.c=new window.FormData,typeof a in this.a.g)c.c.append(this.a.defaultParamName,a);else for(var d in a)a.hasOwnProperty(d)&&c.c.append(d,
b(a[d]));else{var f="aex"+(""+Math.random()).slice(2,18),h="\r\n--"+f+"\r\n",k="\r\n--"+f+"--",g=[""];c.f=f;if(typeof a in this.a.g)g.push('Content-Disposition: form-data; name="'+this.a.defaultParamName+'"\r\n\r\n'+a);else for(d in a)a.hasOwnProperty(d)&&g.push('Content-Disposition: form-data; name="'+d+'"\r\n\r\n'+b(a[d]));c.c=g.join(h)+k}return c};window.AEX.prototype.kick=function(a,b){if(!this.s(a,b))return console.warn("AEX.kick: Invalid user data or response handler. Aborted."),null;var c=
this.j(a);c.f&&this.b.setRequestHeader("Content-Type","multipart/form-data; boundary="+c.f);this.b.h=b;this.b.open("POST",this.a.target,!0);this.b.timeout=this.a.waitingtime;this.b.send(c.c);return{xhr:this.b,data:a}};window.AEX.prototype.l=function(){4===this.readyState&&this.h&&this.h()};window.AEX.prototype.m=function(){if(!XMLHttpRequest)return!1;this.b=new XMLHttpRequest;this.b.onreadystatechange=this.l;this.b.ontimeout=function(){console.warn("AEX.kick: No server response for a long times. Exchange aborted. Retry later.")};
return!0};window.AEX.prototype.o=function(a){if(a.waitingtime){var b=parseInt(+a.waitingtime,10);a.waitingtime=isNaN(b)?3E4:1E3*b}else a.waitingtime=3E4;a.target=a.target?""+a.target:"/";a.defaultParamName=a.defaultParamName?""+a.defaultParamName:"ajax";a.i={object:1,string:1,number:1,"boolean":1};a.g={string:1,number:1,"boolean":1};return a};window.AEX.prototype.s=function(a,b){return typeof a in this.a.i&&(b?"function"===typeof b:!0)}}catch(a){console.dir(a)}})();
