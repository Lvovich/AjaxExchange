/**
 * @file AEX
 * @version 0.1
 *
 * @author Lvovich
 * @see {@link https://github.com/Lvovich/aex|GitHub}
 *
 * @license MIT
 */
'use strict';try{window.AEX=function(a){if("object"!==typeof this||!window.FormData)return console.error('AEX: incorrect call without "new" or too old browser. Plugin Off!'),{kick:function(){}};this.b=this.validateOpts(a);this.prepareRequest()},window.AEX.prototype.kick=function(a,b){if(this.validateUserData(arguments)){this.a.handleResponse=b;this.a.open("POST",this.b.target,!0);var c=new window.FormData;c.append("ajax",JSON.stringify(a));this.a.send(c)}else console.warn("AEX.kick: Invalid user data or response handler. Aborted.")},
window.AEX.prototype.onResponse=function(){4==this.readyState&&(200==this.status?this.handleResponse(this.responseText):this.handleResponse(this.status+": "+this.statusText))},window.AEX.prototype.prepareRequest=function(){this.a=new XMLHttpRequest;this.a.onreadystatechange=this.onResponse;this.a.timeout=this.b.waitingtime;this.a.ontimeout=function(){console.warn("AEX.kick: No server response for a long times. Exchange aborted. Retry later.")}},window.AEX.prototype.validateOpts=function(a){if(a.waitingtime){var b=
parseInt(+a.waitingtime,10);a.waitingtime=isNaN(b)?3E4:1E3*b}else a.waitingtime=3E4;a.target=a.target?""+a.target:"/";return a},window.AEX.prototype.validateUserData=function(a){return"object"===typeof a[0]&&"function"===typeof a[1]}}catch(a){console.dir(a)};
